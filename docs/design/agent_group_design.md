# Agentåˆ†ç»„ç®¡ç†åŠŸèƒ½è®¾è®¡æ–‡æ¡£

## 1. åŠŸèƒ½æ¦‚è¿°

### 1.1 éœ€æ±‚èƒŒæ™¯
- **é—®é¢˜**: Oh My OpenCodeé»˜è®¤workflowè¿‡é‡ï¼Œè®¸å¤šè½»é‡çº§ä»»åŠ¡ä¸éœ€è¦å®Œæ•´çš„Agentç»„
- **ç—›ç‚¹**: 
  - é¢‘ç¹æ‰‹åŠ¨å¼€å…³Agenté…ç½®ç¹ç
  - ç¼ºä¹é’ˆå¯¹ç‰¹å®šé¡¹ç›®çš„Agentç»„åˆç®¡ç†
  - Tokenæ¶ˆè€—è¿‡é«˜ï¼Œå·¥ä½œæ•ˆç‡ä½
- **ç›®æ ‡**: æä¾›ä¾¿æ·çš„Agentåˆ†ç»„ç®¡ç†ï¼Œæ”¯æŒå¿«é€Ÿåˆ‡æ¢ä¸åŒåœºæ™¯çš„Agentç»„åˆ

### 1.2 æ ¸å¿ƒä»·å€¼
1. **é™ä½Tokenæ¶ˆè€—** - æŒ‰éœ€å¯ç”¨æœ€å°Agenté›†åˆ
2. **æé«˜å·¥ä½œæ•ˆç‡** - ä¸€é”®åˆ‡æ¢é¢„è®¾Agentç»„
3. **é¡¹ç›®å®šåˆ¶åŒ–** - é’ˆå¯¹ä¸åŒé¡¹ç›®åˆ›å»ºä¸“å±Agentç»„
4. **ç®€åŒ–é…ç½®** - é¿å…é¢‘ç¹æ‰‹åŠ¨ç¼–è¾‘JSONå’Œå¼€å…³Plugin

### 1.3 åŠŸèƒ½èŒƒå›´
- âœ… Agentåˆ†ç»„åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤
- âœ… åˆ†ç»„å¿«é€Ÿåº”ç”¨ï¼ˆä¸€é”®å¯ç”¨/ç¦ç”¨Agentï¼‰
- âœ… é¢„è®¾åˆ†ç»„æ¨¡æ¿ï¼ˆè½»é‡çº§ã€æ ‡å‡†ã€å®Œæ•´ç­‰ï¼‰
- âœ… åˆ†ç»„å¯¼å…¥/å¯¼å‡ºï¼ˆè·¨é¡¹ç›®å…±äº«ï¼‰
- âœ… æ”¯æŒOpenCode Agentå’ŒOh My OpenCode Agent

---

## 2. æ•°æ®ç»“æ„è®¾è®¡

### 2.1 å­˜å‚¨ä½ç½®
```
~/.config/opencode/agent-groups.json
```

**é€‰æ‹©ç†ç”±**:
- ä¸opencode.jsonã€oh-my-opencode.jsonåŒçº§ï¼Œä¾¿äºç®¡ç†
- ç‹¬ç«‹æ–‡ä»¶ï¼Œä¸å½±å“ç°æœ‰é…ç½®ç»“æ„
- æ”¯æŒç‰ˆæœ¬æ§åˆ¶å’Œå¤‡ä»½

### 2.2 æ•°æ®ç»“æ„

```json
{
  "version": "1.0.0",
  "groups": [
    {
      "id": "group-uuid-1",
      "name": "è½»é‡çº§ç½‘é¡µè®¾è®¡",
      "description": "é€‚ç”¨äºç®€å•çš„é£æ ¼åŒ–ç½‘é¡µè®¾è®¡ä»»åŠ¡",
      "type": "custom",
      "icon": "ğŸ¨",
      "created_at": "2026-01-28T10:00:00Z",
      "updated_at": "2026-01-28T10:00:00Z",
      "agents": {
        "opencode": [
          {
            "agent_id": "plan",
            "enabled": true,
            "config": {
              "temperature": 0.7,
              "maxSteps": 50
            }
          },
          {
            "agent_id": "build",
            "enabled": true,
            "config": {
              "temperature": 0.5
            }
          }
        ],
        "oh_my_opencode": [
          {
            "agent_id": "prometheus",
            "enabled": true,
            "provider": "anthropic",
            "model": "claude-sonnet-4"
          },
          {
            "agent_id": "sisyphus-junior",
            "enabled": true,
            "provider": "anthropic",
            "model": "claude-sonnet-4"
          }
        ]
      },
      "statistics": {
        "usage_count": 15,
        "last_used": "2026-01-28T15:30:00Z"
      }
    }
  ],
  "presets": [
    {
      "id": "preset-minimal",
      "name": "æœ€å°åŒ–é…ç½®",
      "description": "ä»…å¯ç”¨æ ¸å¿ƒAgentï¼Œé€‚åˆç®€å•ä»»åŠ¡",
      "icon": "âš¡",
      "agents": {
        "opencode": ["build"],
        "oh_my_opencode": ["sisyphus-junior"]
      }
    },
    {
      "id": "preset-standard",
      "name": "æ ‡å‡†é…ç½®",
      "description": "å¹³è¡¡çš„Agentç»„åˆï¼Œé€‚åˆå¤§å¤šæ•°ä»»åŠ¡",
      "icon": "âš™ï¸",
      "agents": {
        "opencode": ["build", "plan"],
        "oh_my_opencode": ["prometheus", "sisyphus-junior", "oracle"]
      }
    },
    {
      "id": "preset-full",
      "name": "å®Œæ•´é…ç½®",
      "description": "å¯ç”¨æ‰€æœ‰Agentï¼Œé€‚åˆå¤æ‚é¡¹ç›®",
      "icon": "ğŸš€",
      "agents": {
        "opencode": ["build", "plan", "explore", "code-reviewer"],
        "oh_my_opencode": ["prometheus", "sisyphus-junior", "oracle", "librarian", "explore"]
      }
    },
    {
      "id": "preset-frontend",
      "name": "å‰ç«¯å¼€å‘",
      "description": "é’ˆå¯¹å‰ç«¯UI/UXå¼€å‘ä¼˜åŒ–",
      "icon": "ğŸ¨",
      "agents": {
        "opencode": ["build", "plan"],
        "oh_my_opencode": ["prometheus", "sisyphus-junior"]
      }
    },
    {
      "id": "preset-backend",
      "name": "åç«¯å¼€å‘",
      "description": "é’ˆå¯¹åç«¯API/æ•°æ®åº“å¼€å‘ä¼˜åŒ–",
      "icon": "ğŸ”§",
      "agents": {
        "opencode": ["build", "plan", "explore"],
        "oh_my_opencode": ["prometheus", "sisyphus-junior", "oracle"]
      }
    }
  ],
  "settings": {
    "auto_backup": true,
    "show_usage_stats": true,
    "default_group_id": null
  }
}
```

### 2.3 æ•°æ®å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `version` | string | é…ç½®æ–‡ä»¶ç‰ˆæœ¬å· |
| `groups` | array | ç”¨æˆ·è‡ªå®šä¹‰åˆ†ç»„åˆ—è¡¨ |
| `groups[].id` | string | åˆ†ç»„å”¯ä¸€æ ‡è¯†ï¼ˆUUIDï¼‰ |
| `groups[].name` | string | åˆ†ç»„åç§° |
| `groups[].description` | string | åˆ†ç»„æè¿° |
| `groups[].type` | string | åˆ†ç»„ç±»å‹ï¼šcustom/preset |
| `groups[].icon` | string | åˆ†ç»„å›¾æ ‡ï¼ˆemojiï¼‰ |
| `groups[].agents.opencode` | array | OpenCode Agenté…ç½® |
| `groups[].agents.oh_my_opencode` | array | Oh My OpenCode Agenté…ç½® |
| `groups[].statistics` | object | ä½¿ç”¨ç»Ÿè®¡ä¿¡æ¯ |
| `presets` | array | é¢„è®¾åˆ†ç»„æ¨¡æ¿ |
| `settings` | object | å…¨å±€è®¾ç½® |

---

## 3. UIç•Œé¢è®¾è®¡

### 3.1 ç•Œé¢å¸ƒå±€

#### 3.1.1 Agenté…ç½®é¡µé¢å¢å¼º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agenté…ç½®                                    [åˆ†ç»„ç®¡ç†] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ å½“å‰åˆ†ç»„: [è½»é‡çº§ç½‘é¡µè®¾è®¡ â–¼]  [åº”ç”¨] [ç¼–è¾‘] [æ–°å»º]      â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ Agentåˆ—è¡¨                                        â”‚   â”‚
â”‚ â”‚ â˜‘ build      [å¯ç”¨]  Temperature: 0.5           â”‚   â”‚
â”‚ â”‚ â˜‘ plan       [å¯ç”¨]  Temperature: 0.7           â”‚   â”‚
â”‚ â”‚ â˜ explore    [ç¦ç”¨]                             â”‚   â”‚
â”‚ â”‚ â˜ code-reviewer [ç¦ç”¨]                          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.2 åˆ†ç»„ç®¡ç†å¯¹è¯æ¡†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agentåˆ†ç»„ç®¡ç†                                    [Ã—]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ æˆ‘çš„åˆ†ç»„                                    [+ æ–°å»ºåˆ†ç»„] â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ¨ è½»é‡çº§ç½‘é¡µè®¾è®¡                    [åº”ç”¨] [ç¼–è¾‘] â”‚   â”‚
â”‚ â”‚    é€‚ç”¨äºç®€å•çš„é£æ ¼åŒ–ç½‘é¡µè®¾è®¡ä»»åŠ¡                â”‚   â”‚
â”‚ â”‚    ä½¿ç”¨æ¬¡æ•°: 15æ¬¡  æœ€åä½¿ç”¨: 2å°æ—¶å‰             â”‚   â”‚
â”‚ â”‚                                                  â”‚   â”‚
â”‚ â”‚ ğŸ”§ åç«¯APIå¼€å‘                       [åº”ç”¨] [ç¼–è¾‘] â”‚   â”‚
â”‚ â”‚    é’ˆå¯¹RESTful APIå’Œæ•°æ®åº“å¼€å‘                   â”‚   â”‚
â”‚ â”‚    ä½¿ç”¨æ¬¡æ•°: 8æ¬¡   æœ€åä½¿ç”¨: 1å¤©å‰               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚ é¢„è®¾æ¨¡æ¿                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ âš¡ æœ€å°åŒ–é…ç½®                         [ä½¿ç”¨æ¨¡æ¿]  â”‚   â”‚
â”‚ â”‚    ä»…å¯ç”¨æ ¸å¿ƒAgentï¼Œé€‚åˆç®€å•ä»»åŠ¡                 â”‚   â”‚
â”‚ â”‚                                                  â”‚   â”‚
â”‚ â”‚ âš™ï¸ æ ‡å‡†é…ç½®                          [ä½¿ç”¨æ¨¡æ¿]  â”‚   â”‚
â”‚ â”‚    å¹³è¡¡çš„Agentç»„åˆï¼Œé€‚åˆå¤§å¤šæ•°ä»»åŠ¡               â”‚   â”‚
â”‚ â”‚                                                  â”‚   â”‚
â”‚ â”‚ ğŸš€ å®Œæ•´é…ç½®                          [ä½¿ç”¨æ¨¡æ¿]  â”‚   â”‚
â”‚ â”‚    å¯ç”¨æ‰€æœ‰Agentï¼Œé€‚åˆå¤æ‚é¡¹ç›®                   â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚                           [å¯¼å…¥åˆ†ç»„] [å¯¼å‡ºåˆ†ç»„] [å…³é—­]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.1.3 åˆ›å»º/ç¼–è¾‘åˆ†ç»„å¯¹è¯æ¡†
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ›å»ºAgentåˆ†ç»„                                    [Ã—]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ åŸºæœ¬ä¿¡æ¯                                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ åˆ†ç»„åç§°: [è½»é‡çº§ç½‘é¡µè®¾è®¡___________________]    â”‚   â”‚
â”‚ â”‚ å›¾æ ‡: [ğŸ¨â–¼]                                      â”‚   â”‚
â”‚ â”‚ æè¿°: [é€‚ç”¨äºç®€å•çš„é£æ ¼åŒ–ç½‘é¡µè®¾è®¡ä»»åŠ¡_______]    â”‚   â”‚
â”‚ â”‚      [_____________________________________]    â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚ OpenCode Agenté…ç½®                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â˜‘ build      Temperature: [0.5] MaxSteps: [50]  â”‚   â”‚
â”‚ â”‚ â˜‘ plan       Temperature: [0.7] MaxSteps: [50]  â”‚   â”‚
â”‚ â”‚ â˜ explore    Temperature: [0.5] MaxSteps: [50]  â”‚   â”‚
â”‚ â”‚ â˜ code-reviewer                                  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚ Oh My OpenCode Agenté…ç½®                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ â˜‘ prometheus    Provider: [anthropicâ–¼]          â”‚   â”‚
â”‚ â”‚                 Model: [claude-sonnet-4â–¼]       â”‚   â”‚
â”‚ â”‚ â˜‘ sisyphus-junior Provider: [anthropicâ–¼]        â”‚   â”‚
â”‚ â”‚                   Model: [claude-sonnet-4â–¼]     â”‚   â”‚
â”‚ â”‚ â˜ oracle                                         â”‚   â”‚
â”‚ â”‚ â˜ librarian                                      â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚                                     [å–æ¶ˆ] [ä¿å­˜]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 äº¤äº’æµç¨‹

#### 3.2.1 åº”ç”¨åˆ†ç»„æµç¨‹
```
ç”¨æˆ·ç‚¹å‡»"åº”ç”¨åˆ†ç»„"
    â†“
æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†
"åº”ç”¨åˆ†ç»„å°†ä¿®æ”¹å½“å‰Agenté…ç½®ï¼Œæ˜¯å¦ç»§ç»­ï¼Ÿ"
    â†“
ç”¨æˆ·ç¡®è®¤
    â†“
è¯»å–åˆ†ç»„é…ç½®
    â†“
æ›´æ–°opencode.jsonä¸­çš„agenté…ç½®
    â†“
æ›´æ–°oh-my-opencode.jsonä¸­çš„agenté…ç½®
    â†“
åˆ·æ–°UIæ˜¾ç¤º
    â†“
æ˜¾ç¤ºæˆåŠŸæç¤º
"å·²åº”ç”¨åˆ†ç»„ï¼šè½»é‡çº§ç½‘é¡µè®¾è®¡"
```

#### 3.2.2 åˆ›å»ºåˆ†ç»„æµç¨‹
```
ç”¨æˆ·ç‚¹å‡»"æ–°å»ºåˆ†ç»„"
    â†“
æ‰“å¼€åˆ›å»ºåˆ†ç»„å¯¹è¯æ¡†
    â†“
ç”¨æˆ·å¡«å†™åŸºæœ¬ä¿¡æ¯
    â†“
ç”¨æˆ·é€‰æ‹©è¦å¯ç”¨çš„Agent
    â†“
ç”¨æˆ·é…ç½®Agentå‚æ•°
    â†“
ç”¨æˆ·ç‚¹å‡»"ä¿å­˜"
    â†“
éªŒè¯é…ç½®æœ‰æ•ˆæ€§
    â†“
ç”ŸæˆUUID
    â†“
ä¿å­˜åˆ°agent-groups.json
    â†“
åˆ·æ–°åˆ†ç»„åˆ—è¡¨
    â†“
æ˜¾ç¤ºæˆåŠŸæç¤º
```

#### 3.2.3 å¯¼å…¥/å¯¼å‡ºæµç¨‹
```
å¯¼å‡º:
ç”¨æˆ·ç‚¹å‡»"å¯¼å‡ºåˆ†ç»„"
    â†“
é€‰æ‹©è¦å¯¼å‡ºçš„åˆ†ç»„
    â†“
é€‰æ‹©ä¿å­˜ä½ç½®
    â†“
ç”ŸæˆJSONæ–‡ä»¶
    â†“
æ˜¾ç¤ºæˆåŠŸæç¤º

å¯¼å…¥:
ç”¨æˆ·ç‚¹å‡»"å¯¼å…¥åˆ†ç»„"
    â†“
é€‰æ‹©JSONæ–‡ä»¶
    â†“
éªŒè¯æ–‡ä»¶æ ¼å¼
    â†“
æ£€æŸ¥åˆ†ç»„åç§°å†²çª
    â†“
åˆå¹¶åˆ°agent-groups.json
    â†“
åˆ·æ–°åˆ†ç»„åˆ—è¡¨
    â†“
æ˜¾ç¤ºæˆåŠŸæç¤º
```

---

## 4. ç±»æ¶æ„è®¾è®¡

### 4.1 AgentGroupManagerç±»

```python
class AgentGroupManager:
    """Agentåˆ†ç»„ç®¡ç†å™¨"""
    
    def __init__(self, config_dir: Path):
        """
        åˆå§‹åŒ–åˆ†ç»„ç®¡ç†å™¨
        
        Args:
            config_dir: é…ç½®æ–‡ä»¶ç›®å½• (~/.config/opencode)
        """
        self.config_dir = config_dir
        self.groups_file = config_dir / "agent-groups.json"
        self.groups_data = {}
        self.load_groups()
    
    # ========== æ•°æ®åŠ è½½/ä¿å­˜ ==========
    
    def load_groups(self) -> None:
        """ä»æ–‡ä»¶åŠ è½½åˆ†ç»„é…ç½®"""
        pass
    
    def save_groups(self) -> None:
        """ä¿å­˜åˆ†ç»„é…ç½®åˆ°æ–‡ä»¶"""
        pass
    
    def backup_groups(self) -> Path:
        """å¤‡ä»½å½“å‰åˆ†ç»„é…ç½®"""
        pass
    
    # ========== åˆ†ç»„CRUDæ“ä½œ ==========
    
    def create_group(self, name: str, description: str, 
                     agents: Dict, icon: str = "ğŸ“") -> str:
        """
        åˆ›å»ºæ–°åˆ†ç»„
        
        Args:
            name: åˆ†ç»„åç§°
            description: åˆ†ç»„æè¿°
            agents: Agenté…ç½®å­—å…¸
            icon: åˆ†ç»„å›¾æ ‡
            
        Returns:
            str: åˆ†ç»„ID (UUID)
        """
        pass
    
    def update_group(self, group_id: str, **kwargs) -> bool:
        """æ›´æ–°åˆ†ç»„é…ç½®"""
        pass
    
    def delete_group(self, group_id: str) -> bool:
        """åˆ é™¤åˆ†ç»„"""
        pass
    
    def get_group(self, group_id: str) -> Optional[Dict]:
        """è·å–åˆ†ç»„é…ç½®"""
        pass
    
    def list_groups(self, include_presets: bool = False) -> List[Dict]:
        """åˆ—å‡ºæ‰€æœ‰åˆ†ç»„"""
        pass
    
    # ========== åˆ†ç»„åº”ç”¨ ==========
    
    def apply_group(self, group_id: str, 
                    opencode_config: Dict, 
                    omo_config: Dict) -> Tuple[Dict, Dict]:
        """
        åº”ç”¨åˆ†ç»„é…ç½®åˆ°OpenCodeå’ŒOh My OpenCode
        
        Args:
            group_id: åˆ†ç»„ID
            opencode_config: å½“å‰OpenCodeé…ç½®
            omo_config: å½“å‰Oh My OpenCodeé…ç½®
            
        Returns:
            Tuple[Dict, Dict]: æ›´æ–°åçš„(opencode_config, omo_config)
        """
        pass
    
    def get_current_group_match(self, opencode_config: Dict, 
                                omo_config: Dict) -> Optional[str]:
        """
        æ£€æµ‹å½“å‰é…ç½®æ˜¯å¦åŒ¹é…æŸä¸ªåˆ†ç»„
        
        Returns:
            Optional[str]: åŒ¹é…çš„åˆ†ç»„IDï¼Œæ— åŒ¹é…è¿”å›None
        """
        pass
    
    # ========== é¢„è®¾æ¨¡æ¿ ==========
    
    def get_presets(self) -> List[Dict]:
        """è·å–æ‰€æœ‰é¢„è®¾æ¨¡æ¿"""
        pass
    
    def create_from_preset(self, preset_id: str, name: str) -> str:
        """ä»é¢„è®¾æ¨¡æ¿åˆ›å»ºåˆ†ç»„"""
        pass
    
    # ========== å¯¼å…¥/å¯¼å‡º ==========
    
    def export_group(self, group_id: str, file_path: Path) -> bool:
        """å¯¼å‡ºåˆ†ç»„åˆ°æ–‡ä»¶"""
        pass
    
    def import_group(self, file_path: Path, 
                     overwrite: bool = False) -> Optional[str]:
        """ä»æ–‡ä»¶å¯¼å…¥åˆ†ç»„"""
        pass
    
    # ========== ç»Ÿè®¡ä¿¡æ¯ ==========
    
    def update_usage_stats(self, group_id: str) -> None:
        """æ›´æ–°åˆ†ç»„ä½¿ç”¨ç»Ÿè®¡"""
        pass
    
    def get_usage_stats(self, group_id: str) -> Dict:
        """è·å–åˆ†ç»„ä½¿ç”¨ç»Ÿè®¡"""
        pass
```

### 4.2 UIç»„ä»¶ç±»

```python
class AgentGroupWidget(QWidget):
    """Agentåˆ†ç»„é€‰æ‹©å™¨ç»„ä»¶"""
    
    group_changed = pyqtSignal(str)  # åˆ†ç»„åˆ‡æ¢ä¿¡å·
    
    def __init__(self, parent=None):
        super().__init__(parent)
        self.group_manager = None
        self.init_ui()
    
    def init_ui(self):
        """åˆå§‹åŒ–UI"""
        pass
    
    def set_group_manager(self, manager: AgentGroupManager):
        """è®¾ç½®åˆ†ç»„ç®¡ç†å™¨"""
        pass
    
    def refresh_groups(self):
        """åˆ·æ–°åˆ†ç»„åˆ—è¡¨"""
        pass
    
    def apply_group(self, group_id: str):
        """åº”ç”¨é€‰ä¸­çš„åˆ†ç»„"""
        pass


class AgentGroupDialog(QDialog):
    """Agentåˆ†ç»„ç®¡ç†å¯¹è¯æ¡†"""
    
    def __init__(self, group_manager: AgentGroupManager, parent=None):
        super().__init__(parent)
        self.group_manager = group_manager
        self.init_ui()
    
    def init_ui(self):
        """åˆå§‹åŒ–UI"""
        pass
    
    def show_create_dialog(self):
        """æ˜¾ç¤ºåˆ›å»ºåˆ†ç»„å¯¹è¯æ¡†"""
        pass
    
    def show_edit_dialog(self, group_id: str):
        """æ˜¾ç¤ºç¼–è¾‘åˆ†ç»„å¯¹è¯æ¡†"""
        pass
    
    def delete_group(self, group_id: str):
        """åˆ é™¤åˆ†ç»„"""
        pass
    
    def export_group(self, group_id: str):
        """å¯¼å‡ºåˆ†ç»„"""
        pass
    
    def import_group(self):
        """å¯¼å…¥åˆ†ç»„"""
        pass


class AgentGroupEditDialog(QDialog):
    """Agentåˆ†ç»„ç¼–è¾‘å¯¹è¯æ¡†"""
    
    def __init__(self, group_manager: AgentGroupManager, 
                 group_id: Optional[str] = None, parent=None):
        super().__init__(parent)
        self.group_manager = group_manager
        self.group_id = group_id  # Noneè¡¨ç¤ºåˆ›å»ºæ–°åˆ†ç»„
        self.init_ui()
        if group_id:
            self.load_group_data()
    
    def init_ui(self):
        """åˆå§‹åŒ–UI"""
        pass
    
    def load_group_data(self):
        """åŠ è½½åˆ†ç»„æ•°æ®åˆ°è¡¨å•"""
        pass
    
    def save_group(self):
        """ä¿å­˜åˆ†ç»„"""
        pass
    
    def validate_form(self) -> bool:
        """éªŒè¯è¡¨å•æ•°æ®"""
        pass
```

---

## 5. å®ç°è®¡åˆ’

### 5.1 å¼€å‘é˜¶æ®µ

#### é˜¶æ®µ1: æ•°æ®å±‚å®ç° (2-3å°æ—¶)
- [ ] åˆ›å»ºAgentGroupManagerç±»
- [ ] å®ç°æ•°æ®åŠ è½½/ä¿å­˜é€»è¾‘
- [ ] å®ç°åˆ†ç»„CRUDæ“ä½œ
- [ ] æ·»åŠ å•å…ƒæµ‹è¯•

#### é˜¶æ®µ2: æ ¸å¿ƒåŠŸèƒ½å®ç° (3-4å°æ—¶)
- [ ] å®ç°åˆ†ç»„åº”ç”¨é€»è¾‘
- [ ] å®ç°é¢„è®¾æ¨¡æ¿åŠŸèƒ½
- [ ] å®ç°å¯¼å…¥/å¯¼å‡ºåŠŸèƒ½
- [ ] å®ç°ç»Ÿè®¡ä¿¡æ¯åŠŸèƒ½

#### é˜¶æ®µ3: UIç»„ä»¶å®ç° (4-5å°æ—¶)
- [ ] åˆ›å»ºAgentGroupWidgetç»„ä»¶
- [ ] åˆ›å»ºAgentGroupDialogå¯¹è¯æ¡†
- [ ] åˆ›å»ºAgentGroupEditDialogå¯¹è¯æ¡†
- [ ] é›†æˆåˆ°ç°æœ‰Agenté…ç½®é¡µé¢

#### é˜¶æ®µ4: æµ‹è¯•ä¸ä¼˜åŒ– (2-3å°æ—¶)
- [ ] åŠŸèƒ½æµ‹è¯•
- [ ] UI/UXä¼˜åŒ–
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] æ–‡æ¡£ç¼–å†™

### 5.2 æ–‡ä»¶ç»“æ„

```
opencode_config_manager_fluent.py
â”œâ”€â”€ class AgentGroupManager          # æ–°å¢
â”œâ”€â”€ class AgentGroupWidget           # æ–°å¢
â”œâ”€â”€ class AgentGroupDialog           # æ–°å¢
â”œâ”€â”€ class AgentGroupEditDialog       # æ–°å¢
â”œâ”€â”€ class AgentConfigPage            # ä¿®æ”¹ï¼šé›†æˆåˆ†ç»„åŠŸèƒ½
â””â”€â”€ class OhMyAgentConfigPage        # ä¿®æ”¹ï¼šé›†æˆåˆ†ç»„åŠŸèƒ½

~/.config/opencode/
â”œâ”€â”€ opencode.json
â”œâ”€â”€ oh-my-opencode.json
â”œâ”€â”€ agent-groups.json                # æ–°å¢
â””â”€â”€ backups/
    â””â”€â”€ agent-groups-backup-*.json   # æ–°å¢
```

### 5.3 ä»£ç æ’å…¥ä½ç½®

åœ¨ `opencode_config_manager_fluent.py` ä¸­ï¼š

1. **AgentGroupManagerç±»** - æ’å…¥åˆ°ç¬¬200è¡Œå·¦å³ï¼ˆæ•°æ®ç±»å®šä¹‰ä¹‹åï¼‰
2. **AgentGroupWidgetç»„ä»¶** - æ’å…¥åˆ°ç¬¬15000è¡Œå·¦å³ï¼ˆAgenté…ç½®é¡µé¢ä¹‹å‰ï¼‰
3. **AgentGroupDialogå¯¹è¯æ¡†** - æ’å…¥åˆ°ç¬¬15500è¡Œå·¦å³
4. **AgentGroupEditDialogå¯¹è¯æ¡†** - æ’å…¥åˆ°ç¬¬16000è¡Œå·¦å³
5. **ä¿®æ”¹AgentConfigPage** - åœ¨ç¬¬16500è¡Œå·¦å³ï¼Œæ·»åŠ åˆ†ç»„é€‰æ‹©å™¨
6. **ä¿®æ”¹OhMyAgentConfigPage** - åœ¨ç¬¬17500è¡Œå·¦å³ï¼Œæ·»åŠ åˆ†ç»„é€‰æ‹©å™¨

---

## 6. æŠ€æœ¯ç»†èŠ‚

### 6.1 åˆ†ç»„åº”ç”¨é€»è¾‘

```python
def apply_group(self, group_id: str, opencode_config: Dict, omo_config: Dict):
    """åº”ç”¨åˆ†ç»„é…ç½®"""
    group = self.get_group(group_id)
    if not group:
        return opencode_config, omo_config
    
    # 1. æ›´æ–°OpenCode Agenté…ç½®
    if "agent" not in opencode_config:
        opencode_config["agent"] = {}
    
    for agent_cfg in group["agents"]["opencode"]:
        agent_id = agent_cfg["agent_id"]
        if agent_cfg["enabled"]:
            # å¯ç”¨Agentå¹¶åº”ç”¨é…ç½®
            opencode_config["agent"][agent_id] = agent_cfg.get("config", {})
        else:
            # ç¦ç”¨Agentï¼ˆè®¾ç½®disable=trueï¼‰
            if agent_id in opencode_config["agent"]:
                opencode_config["agent"][agent_id]["disable"] = True
    
    # 2. æ›´æ–°Oh My OpenCode Agenté…ç½®
    if "agents" not in omo_config:
        omo_config["agents"] = {}
    
    for agent_cfg in group["agents"]["oh_my_opencode"]:
        agent_id = agent_cfg["agent_id"]
        if agent_cfg["enabled"]:
            # å¯ç”¨Agentå¹¶åº”ç”¨é…ç½®
            omo_config["agents"][agent_id] = {
                "provider": agent_cfg.get("provider"),
                "model": agent_cfg.get("model")
            }
        else:
            # ç¦ç”¨Agentï¼ˆä»é…ç½®ä¸­ç§»é™¤ï¼‰
            if agent_id in omo_config["agents"]:
                del omo_config["agents"][agent_id]
    
    # 3. æ›´æ–°ä½¿ç”¨ç»Ÿè®¡
    self.update_usage_stats(group_id)
    
    return opencode_config, omo_config
```

### 6.2 é…ç½®å†²çªå¤„ç†

å½“åº”ç”¨åˆ†ç»„æ—¶ï¼Œéœ€è¦å¤„ç†ä»¥ä¸‹å†²çªï¼š

1. **Agentå‚æ•°å†²çª**: åˆ†ç»„é…ç½®è¦†ç›–ç°æœ‰é…ç½®
2. **Provider/Modelä¸å­˜åœ¨**: æ˜¾ç¤ºè­¦å‘Šï¼Œè·³è¿‡è¯¥Agent
3. **åˆ†ç»„é…ç½®ä¸å®Œæ•´**: ä½¿ç”¨é»˜è®¤å€¼å¡«å……

### 6.3 å¤‡ä»½ç­–ç•¥

- æ¯æ¬¡åº”ç”¨åˆ†ç»„å‰è‡ªåŠ¨å¤‡ä»½å½“å‰é…ç½®
- å¤‡ä»½æ–‡ä»¶å‘½å: `agent-groups-backup-{timestamp}.json`
- ä¿ç•™æœ€è¿‘10ä¸ªå¤‡ä»½æ–‡ä»¶

---

## 7. ç”¨æˆ·ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: è½»é‡çº§ç½‘é¡µè®¾è®¡
```
ç”¨æˆ·: "æˆ‘è¦åšä¸€ä¸ªç®€å•çš„è½åœ°é¡µ"
æ“ä½œ: é€‰æ‹©"è½»é‡çº§ç½‘é¡µè®¾è®¡"åˆ†ç»„ â†’ ç‚¹å‡»"åº”ç”¨"
ç»“æœ: ä»…å¯ç”¨ prometheus + sisyphus-juniorï¼ŒèŠ‚çœToken
```

### åœºæ™¯2: å¤æ‚åç«¯å¼€å‘
```
ç”¨æˆ·: "æˆ‘è¦å¼€å‘ä¸€ä¸ªå¤æ‚çš„å¾®æœåŠ¡æ¶æ„"
æ“ä½œ: é€‰æ‹©"å®Œæ•´é…ç½®"åˆ†ç»„ â†’ ç‚¹å‡»"åº”ç”¨"
ç»“æœ: å¯ç”¨æ‰€æœ‰Agentï¼Œè·å¾—å®Œæ•´æ”¯æŒ
```

### åœºæ™¯3: é¡¹ç›®å®šåˆ¶
```
ç”¨æˆ·: "æˆ‘çš„é¡¹ç›®æœ‰ç‹¬ç‰¹çš„ç¾å­¦é£æ ¼"
æ“ä½œ: åˆ›å»ºæ–°åˆ†ç»„ â†’ æ·»åŠ è‡ªå®šä¹‰Agent â†’ ä¿å­˜
ç»“æœ: é’ˆå¯¹é¡¹ç›®ä¼˜åŒ–çš„Agentç»„åˆ
```

### åœºæ™¯4: è·¨é¡¹ç›®å…±äº«
```
ç”¨æˆ·: "æˆ‘æƒ³åœ¨å¦ä¸€ä¸ªé¡¹ç›®ä½¿ç”¨ç›¸åŒçš„Agenté…ç½®"
æ“ä½œ: å¯¼å‡ºåˆ†ç»„ â†’ åœ¨æ–°é¡¹ç›®å¯¼å…¥
ç»“æœ: å¿«é€Ÿå¤ç”¨æˆåŠŸé…ç½®
```

---

## 8. åç»­æ‰©å±•

### 8.1 æ™ºèƒ½æ¨è
- æ ¹æ®é¡¹ç›®ç±»å‹è‡ªåŠ¨æ¨èåˆ†ç»„
- æ ¹æ®å†å²ä½¿ç”¨è®°å½•æ¨èåˆ†ç»„

### 8.2 åˆ†ç»„æ¨¡æ¿å¸‚åœº
- ç¤¾åŒºåˆ†äº«åˆ†ç»„é…ç½®
- ä¸€é”®å®‰è£…çƒ­é—¨åˆ†ç»„

### 8.3 åŠ¨æ€åˆ†ç»„
- æ ¹æ®ä»»åŠ¡æè¿°è‡ªåŠ¨é€‰æ‹©åˆ†ç»„
- AIè¾…åŠ©åˆ›å»ºæœ€ä¼˜åˆ†ç»„

### 8.4 æ€§èƒ½åˆ†æ
- ç»Ÿè®¡ä¸åŒåˆ†ç»„çš„Tokenæ¶ˆè€—
- å¯¹æ¯”ä¸åŒåˆ†ç»„çš„ä»»åŠ¡å®Œæˆæ•ˆç‡

---

## 9. æ€»ç»“

### 9.1 æ ¸å¿ƒä¼˜åŠ¿
1. **ç®€åŒ–é…ç½®** - ä¸€é”®åˆ‡æ¢ï¼Œæ— éœ€æ‰‹åŠ¨ç¼–è¾‘JSON
2. **é™ä½æˆæœ¬** - æŒ‰éœ€å¯ç”¨Agentï¼Œå‡å°‘Tokenæ¶ˆè€—
3. **æé«˜æ•ˆç‡** - é’ˆå¯¹åœºæ™¯ä¼˜åŒ–ï¼ŒåŠ å¿«ä»»åŠ¡å®Œæˆ
4. **çµæ´»å®šåˆ¶** - æ”¯æŒé¡¹ç›®çº§å®šåˆ¶å’Œè·¨é¡¹ç›®å…±äº«

### 9.2 æŠ€æœ¯äº®ç‚¹
1. **ç‹¬ç«‹å­˜å‚¨** - ä¸å½±å“ç°æœ‰é…ç½®ç»“æ„
2. **å®Œæ•´å¤‡ä»½** - è‡ªåŠ¨å¤‡ä»½ï¼Œå®‰å…¨å¯é 
3. **é¢„è®¾æ¨¡æ¿** - å¼€ç®±å³ç”¨ï¼Œé™ä½å­¦ä¹ æˆæœ¬
4. **ç»Ÿè®¡åˆ†æ** - æ•°æ®é©±åŠ¨ï¼ŒæŒç»­ä¼˜åŒ–

### 9.3 å®ç°éš¾åº¦
- **æ•°æ®å±‚**: â­â­ (ç®€å•)
- **æ ¸å¿ƒåŠŸèƒ½**: â­â­â­ (ä¸­ç­‰)
- **UIç»„ä»¶**: â­â­â­â­ (è¾ƒå¤æ‚)
- **æ€»ä½“**: â­â­â­ (ä¸­ç­‰)

**é¢„è®¡å¼€å‘æ—¶é—´**: 11-15å°æ—¶
**é¢„è®¡ä»£ç é‡**: 1500-2000è¡Œ
